[{"title":"CV'大法'部署项目(docker)","url":"/2024/10/10/CV%E5%A4%A7%E6%B3%95%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE-docker/","content":"这是我的第一篇文章\n\n\n搭建docker环境\n卸载旧版docker\n\n#1、切换到根目录cd ~#2、卸载旧版dockeryum remove docker \\    docker-client \\    docker-client-latest \\    docker-common \\    docker-latest \\    docker-latest-logrotate \\    docker-logrotate \\    docker-engine \\    docker-selinux\n\n\n配置Docker的yum库\n安装一个yum工具\n\nsudo yum install -y yum-utils device-mapper-persistent-data lvm2\n\n\n安装成功后，配置Docker的yum源\n\nsudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n\n更新yum，建立缓存\n\nsudo yum makecache fast\n\n\n安装Docker\n\n#1、安装dockeryum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin#2、设置开机启动自启dockersystemctl enable docker#3、启动dockersystemctl start docker\n\n\n配置镜像加速\n\n# 创建目录sudo mkdir -p /etc/docker# 复制内容，注意把其中的镜像加速地址改成自己的# 地址 阿里云首页-&gt;产品-&gt;容器-&gt;容器镜像服务ACR-&gt;管理控制台-&gt;镜像工具-&gt;镜像加速器-&gt;CentOSsudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;&#123;  &quot;registry-mirrors&quot;: [&quot;https://wk1geju5.mirror.aliyuncs.com&quot;]&#125;EOF# 重新加载配置sudo systemctl daemon-reload# 重启Dockersudo systemctl restart docker\n\n\n\n\n启动和校验\n\n注意：下面补充几条最常用的命令\n# 启动Dockersystemctl start docker# 停止Dockersystemctl stop docker# 重启systemctl restart docker# 设置开机自启systemctl enable docker# 执行docker ps命令，如果不报错，说明安装启动成功docker ps\n\n\n\n\n配置mysql环境\n初始化文件\n\n# 创建目录cd ~mkdir mysqlcd mysqlmkdir datamkdir confmkdir init#执行完后把mysql文件夹用准备好的mysql的文件替换掉\n\n\n创建并运行容器，挂载数据卷\n\n# 创建并运行新mysql容器，挂载本地目录docker run -d \\  --name mysql \\  -p 3306:3306 \\  -e TZ=Asia/Shanghai \\  -e MYSQL_ROOT_PASSWORD=La91457..  \\  -v /root/mysql/data:/var/lib/mysql \\  -v /root/mysql/conf:/etc/mysql/conf.d \\  -v /root/mysql/init:/docker-entrypoint-initdb.d \\  mysql\n\n自定义网桥\n创建网段\n创建网段\n\ndocker network create msboard\n\n\n将mysql容器加入该网段\n\ndocker network connect msboard mysql\n\n项目部署\n部署后端项目\n打包\n检查数据库连接信息\n\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver    spring.datasource.url=jdbc:mysql://mysql:3306/msboard?CharacterEncoding=UTF-8    spring.datasource.username=root    spring.datasource.password=La91457..    mybatis.configuration.map-underscore-to-camel-case=true\n\n\n打jar包\n编写dockerfile(注意jdk版本)文件(在—-文件夹内)\n把jar包和dockerfile文件放入centOs的&#x2F;root文件下\n执行命令\n\ncd ~#构建自定义镜像，命名为msboarddocker build -t msboard .docker run -d --name mb -p 8080:8080  --network msboard msboard#执行后查看msboard镜像是否启动\n\n\n部署前端代码\n编写nginx.conf配置文件\n\nserver &#123;        listen       18080;        # 指定前端项目所在的位置        location / &#123;            root /usr/share/nginx/html/web;        &#125;        error_page   500 502 503 504  /50x.html;        location = /50x.html &#123;            root   html;        &#125;        location /api &#123;            rewrite /(.*)  /$1 break;            proxy_pass http://mb:8080;        &#125;    &#125;\n\n\n把nginx目录放入centOs的&#x2F;root文件下(nginx目录内包含nginx.conf文件和html文件夹，html文件夹包含项目文件)-执行命令\n\ncd ~docker run -d \\  --name nginx \\  -p 18080:18080 \\#  -p 18081:18081 \\   -v /root/nginx/html:/usr/share/nginx/html \\  -v /root/nginx/nginx.conf:/etc/nginx/nginx.conf \\  --network msboard \\  nginx\n\ncv大法初步练成 ，祝你早日走死编程之路 ···      by~","categories":["运维"],"tags":["docker部署项目"]},{"title":"Welcome to use Hexo Theme Keep","url":"/2022/10/25/welcome-to-use-hexo-theme-keep/","content":"Welcome to use Hexo Theme Keep.\nThis is your very first post. Check documentation for more info. If you get any problems when using Keep theme, you can ask me on GitHub.\n\n\n\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n","categories":["Hexo"],"tags":["Hexo","Keep"]}]